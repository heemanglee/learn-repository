## 1. 수직 확장(Scale-Up)과 수평 확장(Scale-Out)

![image](https://github.com/user-attachments/assets/42be002a-305c-425c-a762-f5cd16e84945)

수직 확장(Scale-Up)은 서버의 성능을 향상시켜 처리량을 증가시키는 방법이다. CPU나 메모리 등 더 좋은 하드웨어를 사용하여 서버의 성능을 향상시킬 수 있다. 
- 서버 한 대의 성능을 향상시켜 처리량을 증가시키는 방식
- 더 좋은 하드웨어(CPU, RAM, SSD)를 추가하여 성능 개선
- 하드웨어 성능을 향상시키는 것엔 한계가 존재

수평 확장(Scale-Out)은 여러 대의 서버를 구성하여 요청을 분산시켜 처리하는 방법이다. 한 대의 서버에서 모든 요청을 처리하지 않고 여러 대의 서버로 요청을 분산시켜 효율적으로 처리할 수 있다.
- 여러 대의 서버를 추가하여 요청을 분산하는 방식
- 한 대의 서버가 아닌 여러 대의 서버가 병렬로 작업을 수행
- 로드 밸런서(Load Balancer)를 사용하여 요청을 분산
- 서버 간 데이터 동기화가 필요함

---

## 2. 로드 밸런서(Load Balancer)

![image](https://github.com/user-attachments/assets/ad2398ae-e41e-47e1-8b5b-8a0f9c2e7a21)

로드 밸런서는 트래픽이 증가하였을 때 특정 서버 한 대에 과부하가 걸리는 것을 방지하고 여러 대의 서버로 트래픽을 고르게 분산될 수 있도록 한다. 극단적인 예시로 서버 10대가 존재하고 동시에 100개의 요청이 발생했을 때, 로드 밸런서는 각 서버에 10개씩 요청을 분산시킨다. 로드 밸런서가 없었다면 한 대의 서버가 100개의 요청을 모두 처리해야했을 것이다.

로드 밸런서는 특정 서버에 장애가 발생하면 해당 서버를 제외하고 나머지 정상으로 작동하는 서버로 트래픽을 분산한다. 헬스 체크(Health Check)를 통해 주기적으로 서버의 상태를 확인하여 장애가 발생한 서버를 인지한다. 덕분에 사용자는 장애가 발생한 것을 인지하지 못한채 서비스를 계속 사용할 수 있다. 

단, 상태를 유지하는(Stateful) 애플리케이션에서 로드 밸런서를 사용한다면 서버 간 동기화가 필요하다. 각 서버마다 가지고 있는 데이터 정보가 다르다면 동일한 요청에 대해서 일관성 없는 응답을 내리게 될 것이다. 예를 들면, 세션을 사용하여 사용자의 로그인 기록을 저장하게 된다면 세션이 저장되지 않은 서버에서는 재로그인이 필요할 것이다. 따라서 모든 서버가 세션 정보를 동일하게 가질 수 있도록 동기화가 필요하다.  

---

## 3. 로드 밸런서는 서버의 부하 상태에 따라 트래픽을 다양한 방식으로 분산시킨다.

- 라운드로빈 방식
    - 서버를 순차적으로 선택하여 균등한 분산을 보장한다.
    - 여러 대의 서버가 동일한 스펙을 사용하는 경우 적합하다.
- 가중 라운드 방식
    - 성능이 좋은 서버에 더 많은 요청을 전송한다.
- IP 해시 방식
    - 사용자의 IP 주소를 해싱하여 항상 동일한 서버로 요청을 전달하는 방법이다.
- 최소 연결 방식
    - 서버풀을 모니터링하여 가장 적은 요청을 처리하고 있는 서버로 요청을 전달한다.
- 최소 리스폰 타임
    - 서버풀을 모니터링하여 (1)현재 처리 중인 요청 개수가 적으면서, (2)평균 응답 시간이 짧은 서버로 요청을 전달한다.
